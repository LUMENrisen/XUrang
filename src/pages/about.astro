---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

// èº«ä»½ä¸æˆ¿é—´çš„æ˜ å°„ï¼ˆç¡¬ç¼–ç ï¼Œå› ä¸ºèº«ä»½ä¿¡æ¯ç›®å‰ä¸åœ¨é›†åˆé‡Œï¼‰
const identities = [
	{ room: 'é£æ¥', name: 'è·¯è¿‡', icon: 'ğŸ¦Œ' },
	{ room: 'èŠ±å¼€', name: 'è·¯ä¸Š', icon: 'ğŸ¦Œ' },
	{ room: 'åˆç”Ÿ', name: 'è·¯æ˜', icon: 'ğŸ¦Œ' },
	{ room: 'æˆè¹Š', name: 'è·¯ç‚æ™¨', icon: 'ğŸ¦Œ' },
	{ room: 'è‹¥æ°´', name: 'è·¯å®…', icon: 'ğŸ¦Œ' },
	{ room: 'ä¸å°½', name: 'è·¯ç—´', icon: 'ğŸ¦Œ' },
	{ room: 'é“', name: 'è·¯æ ‡', icon: 'ğŸ¦Œ' },
];
const rooms = await getCollection('rooms');
const roomMap = Object.fromEntries(rooms.map(r => [r.data.title, r]));
---

<Layout title="è·¯">
	<main style="max-width: 700px; margin: 0 auto; padding: 2rem 1rem;">
		<h1 style="display: flex; align-items: center; gap: 0.5rem;">
			<span style="font-size: 2.5rem;">ğŸ¦Œ</span> è·¯
		</h1>
		<p style="font-size: 1.2rem; margin-bottom: 2rem;">
			æ¯ä¸ªæˆ¿é—´éƒ½æœ‰ä¸€ä¸ªè¡Œèµ°äºæ­¤çš„èº«ä»½ã€‚
		</p>
		<div style="display: grid; gap: 1.5rem;">
			{
				identities.map(({ room, name, icon }) => {
					const roomData = roomMap[room];
					return (
						<a href={`/rooms/${roomData?.id || '#'}`} style="text-decoration: none; color: inherit;">
							<article style="
								display: flex;
								align-items: center;
								gap: 1rem;
								padding: 1rem;
								border: 1px solid #e5e7eb;
								border-radius: 0.75rem;
								background: white;
							">
								<span style="font-size: 2rem;">{icon}</span>
								<div>
									<h3 style="margin: 0; font-size: 1.25rem;">{name}</h3>
									<p style="margin: 0; color: #6b7280;">{room} Â· {roomData?.data.subtitle}</p>
								</div>
							</article>
						</a>
					);
				})
			}
		</div>
	</main>
</Layout>