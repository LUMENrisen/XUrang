---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

// 获取所有房间并按 order 排序
const rooms = await getCollection('rooms');
rooms.sort((a, b) => a.data.order - b.data.order);
---

<Layout title="塔">
	<main style="max-width: 1000px; margin: 0 auto; padding: 2rem 1rem;">
		<h1 style="text-align: center; font-size: 3rem; margin-bottom: 0.5rem;">⭐</h1>
		
		<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 1.5rem;">
			{
				rooms.map((room) => (
					// 关键：链接必须指向 /rooms/房间id
					<a href={`/rooms/${room.id}`} style="text-decoration: none; color: inherit;">
						<article style="
							clip-path: polygon(10% 0%, 90% 0%, 100% 100%, 0% 100%);
							border: 1px solid #e5e7eb;
							border-radius: 1rem;
							padding: 1.5rem;	/* 适当增加内边距，让图标有呼吸空间 */
							background: white;
							box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
							transition: all 0.2s;
							height: 90%;
							min-height: 20px;	/* 最小高度，保证居中空间 */
							display: flex;
							align-items: center;
							justify-content: center;
							text-align: center;
						">
							<div style="font-size: 2.4rem; line-height: 1;">{room.data.icon}</div>
						
						</article>
					</a>
				))
			}
		</div>
	</main>
</Layout>