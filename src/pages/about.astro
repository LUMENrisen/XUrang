---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const rooms = await getCollection('rooms');
rooms.sort((a, b) => a.data.order - b.data.order);

// äººç‰©ä¸æˆ¿é—´çš„å¯¹åº”å…³ç³»ï¼ˆç¡®ä¿æˆ¿é—´æ ‡é¢˜ä¸ rooms ä¸­çš„ title ä¸€è‡´ï¼‰
const identities = [
  { person: 'è·¯è¿‡', roomTitle: 'é£æ¥' },
  { person: 'è·¯ä¸Š', roomTitle: 'èŠ±å¼€' },
  { person: 'è·¯æ˜', roomTitle: 'åˆç”Ÿ' },
  { person: 'è·¯ç‚æ™¨', roomTitle: 'æˆè¹Š' },
  { person: 'è·¯å®…', roomTitle: 'è‹¥æ°´' },
  { person: 'è·¯ç—´', roomTitle: 'ä¸å°½' },
  { person: 'è·¯æ ‡', roomTitle: 'é“' },
];

// æ ¹æ®æˆ¿é—´æ ‡é¢˜æ‰¾åˆ°å¯¹åº”çš„æˆ¿é—´å¯¹è±¡
const roomMap = Object.fromEntries(rooms.map(r => [r.data.title, r]));
---

<Layout title="è·¯ Â· Lumen's Atelier">
  <main style="max-width: 800px; margin: 0 auto; padding: 2rem 1rem;">
    <!-- ä¸­å¤®å¤§å›¾æ ‡ -->
    <div style="font-size: 6rem; text-align: center; margin-bottom: 2rem;">ğŸ¦Œ</div>

    <!-- æ¯ä¸€è¡Œæ˜¯ä¸€ä¸ª flex å®¹å™¨ï¼Œå·¦å³ä¸¤åˆ—å›ºå®šå®½åº¦ï¼Œæ•´ä½“å±…ä¸­ -->
    <div style="display: flex; flex-direction: column; align-items: center; gap: 0.8rem;">
      {identities.map((item) => {
        const room = roomMap[item.roomTitle];
        return (
          <div style="display: flex; justify-content: center; width: 100%; gap: 2rem;">
            <!-- å·¦ä¾§äººåï¼ˆå³å¯¹é½ï¼‰ -->
            <div style="width: 120px; text-align: right;">
              <a href={`/people/${item.person}`} style="text-decoration: none; color: inherit; font-size: 1.2rem;">
                {item.person}
              </a>
            </div>
            <!-- å³ä¾§æˆ¿é—´å›¾æ ‡å’Œåç§°ï¼ˆå·¦å¯¹é½ï¼‰ -->
            <div style="width: 120px; text-align: left;">
              {room ? (
                <a href={`/rooms/${room.id}`} style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 0.5rem;">
                  <span style="font-size: 1.6rem;">{room.data.icon}</span>
                  <span style="font-size: 1.2rem;">{room.data.title}</span>
                </a>
              ) : (
                <span style="color: gray;">æœªæ‰¾åˆ°</span>
              )}
            </div>
          </div>
        );
      })}
    </div>

    <p style="text-align: center; margin-top: 2rem; color: gray;">
      ç‚¹å‡»äººåè¿›å…¥äººç‰©å¿—ï¼Œç‚¹å‡»æˆ¿é—´è¿›å…¥å¡”çš„æˆ¿é—´
    </p>
  </main>
</Layout>